# 📚 LINE業務マニュアルBot

社内業務マニュアルを LINE で簡単検索・閲覧できるシステムです。

## 🚀 使い方

### 📱 LINE友だち追加

以下の方法でBotを友だち追加してください：

#### QRコード
<img src="./スクリーンショット/スクリーンショット 2025-09-04 072254.png" alt="LINE業務マニュアルBot QRコード" width="200" height="200">

スマートフォンでLINEアプリを開き、上のQRコードを読み取って友だち追加してください。

#### LINE公式アカウント
**アカウント名**: LINE業務マニュアルBot  

#### 友だち追加方法
1. **QRコード読み取り**（推奨）: 上のQRコードをスマートフォンで読み取り
2. **LINE ID検索**: LINEアプリでID検索機能を使用
3. **友だち追加URL**: 直接リンクから追加

### 🎯 基本操作

#### 1️⃣ 初回利用（ユーザー登録）
1. 友だち追加後、「**登録**」と入力
2. メールアドレスを入力
3. 氏名を入力  
4. 登録内容を確認して完了

#### 2️⃣ マニュアル検索
- **キーワード検索**: 「経費精算」「有給休暇」等を直接入力
- **カテゴリ検索**: 「経理カテゴリを検索」「人事カテゴリを検索」等を入力

#### 3️⃣ その他の機能
- **ヘルプ**: 「ヘルプ」と入力で使い方確認
- **問い合わせ**: 「問い合わせ」と入力でサポートに連絡
- **テスト**: 「テスト」と入力でシステム動作確認

### 🎛️ リッチメニュー
画面下部のメニューボタンで簡単操作：

| 🔍 キーワード検索 | 📚 カテゴリ検索 | 📝 問い合わせ |
|:---:|:---:|:---:|
| **❓ ヘルプ** | **📊 人気マニュアル** | **👤 マイページ** |

> **注意**: リッチメニューを表示するには管理者による設定が必要です。設定手順は下記をご覧ください。

## 🔑 権限レベル

| 権限 | アクセス可能な内容 |
|:---|:---|
| 一般 | 基本的な業務マニュアル |
| 総務 | 一般 + 総務関連マニュアル |
| 役職 | 一般 + 総務 + 役職者向けマニュアル |
| 管理者 | 全マニュアル + 管理機能 |

### 🛠️ 管理者専用コマンド
- **統計**: システム利用統計の確認
- **問い合わせ一覧**: 未対応の問い合わせ確認
- **管理**: 管理者メニューの表示

## 📞 サポート

### 🔧 トラブルシューティング

#### Bot が応答しない場合
1. 友だち追加されているか確認
2. 「テスト」と入力してシステム状況を確認
3. 改善しない場合は管理者にお問い合わせください

#### マニュアルが見つからない場合
1. **キーワードを変更**: 「経費」→「経費精算」など具体的に
2. **カテゴリ検索を利用**: カテゴリから探してみる
3. **ヘルプ確認**: 「ヘルプ」で検索のコツを確認

### 📧 お問い合わせ

1. **Bot内問い合わせ機能**（推奨）
   - LINEで「問い合わせ」と入力
   - 管理者に自動通知されます

2. **直接連絡**
   - システム管理者: [管理者メールアドレス]
   - 緊急時: [緊急連絡先]

## 🎉 主な機能

### ✅ 実装済み機能
- [x] ユーザー登録・認証システム
- [x] キーワード検索機能
- [x] カテゴリ検索機能
- [x] 権限レベル別アクセス制御
- [x] 問い合わせ・要望受付
- [x] 管理者統計機能
- [x] システム動作確認機能

### 🔄 開発中機能
- [ ] リッチメニュー（ボタン操作）
- [ ] 人気マニュアル表示
- [ ] 検索履歴機能
- [ ] マイページ機能拡張

## 🏢 システム情報

### 📊 技術構成
- **プラットフォーム**: Vercel (Serverless)
- **データベース**: Google Sheets
- **チャットボット**: LINE Messaging API
- **開発言語**: Node.js (JavaScript)

### 🔗 関連リンク
- **システム状況**: [https://line-manual-project-no2.vercel.app/api/health](https://line-manual-project-no2.vercel.app/api/health)
- **GitHub**: [https://github.com/TeERi-H/line-manual-project](https://github.com/TeERi-H/line-manual-project)
- **プロジェクトURL**: [https://line-manual-project-no2.vercel.app](https://line-manual-project-no2.vercel.app)

---

## 🔧 リッチメニュー設定手順（管理者向け）

### 前提条件
- LINE Developers Console へのアクセス権限
- 環境変数設定権限（Vercel等）
- `ADMIN_TOKEN` の設定

### 設定手順

#### 1️⃣ 自動セットアップスクリプト実行
```bash
# リッチメニューの作成と設定
node scripts/setup-rich-menu.js

# 既存のリッチメニューをクリーンアップ（必要に応じて）
node scripts/setup-rich-menu.js cleanup
```

#### 2️⃣ API経由でのセットアップ
```bash
# リッチメニュー状況確認
curl "https://your-app.vercel.app/api/rich-menu-setup?action=status&token=YOUR_ADMIN_TOKEN"

# 完全セットアップ実行
curl -X POST "https://your-app.vercel.app/api/rich-menu-setup?token=YOUR_ADMIN_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"action":"setup"}'
```

#### 3️⃣ 環境変数の設定
セットアップ後に表示される以下のIDを環境変数に設定：

**Vercelの場合:**
- Vercel Dashboard → Settings → Environment Variables
- `RICH_MENU_MAIN_ID`: メインメニューID
- `RICH_MENU_ADMIN_ID`: アドミンメニューID

**ローカル開発:**
```bash
# .env.local に追加
RICH_MENU_MAIN_ID=richmenu-xxxxxxxxx
RICH_MENU_ADMIN_ID=richmenu-yyyyyyyyy
```

#### 4️⃣ リッチメニュー画像の作成（現在は画像なしで動作）
- サイズ: 2500 × 1686 ピクセル
- ファイル形式: JPG または PNG
- ファイルサイズ: 1MB以下

### トラブルシューティング
- **メニューが表示されない**: 環境変数が正しく設定されているか確認
- **ボタンが反応しない**: webhook URLが正しく設定されているか確認
- **エラーが発生**: ログを確認し、LINE Developers Console の設定を確認

---

### 📝 更新履歴
- **2025-09-04**: リッチメニュー完全実装、フレックスメッセージ対応
- **2025-09-03**: リッチメニューポストバック機能実装
- **2025-09-02**: 管理者機能・問い合わせ機能実装完了
- **2025-09-01**: マニュアル検索機能実装完了
- **2025-08-31**: ユーザー登録機能実装完了
- **2025-08-30**: 基盤システム構築完了

> 💡 **ヒント**: このBotは継続的に改善されています。新機能の要望がございましたら、Bot内の「問い合わせ」機能をご利用ください！