# チケット #003: Googleスプレッドシート設計

## 概要
データベースとして使用するGoogleスプレッドシートのスキーマ設計と初期設定

## 優先度
**High** - 開発前に確定必要

## 作業内容

### シート構成の作成

#### 1. ユーザーマスタ（シート名: users）
- [ ] ヘッダー行の作成
```
| A:メールアドレス | B:氏名 | C:権限 | D:LINE_ID | E:登録日時 | F:最終アクセス | G:有効フラグ |
```

- [ ] データ検証ルール設定
  - 権限: 一般/総務/役職 のプルダウン
  - 有効フラグ: TRUE/FALSE

- [ ] サンプルデータ投入
```
| test@company.com | テスト太郎 | 役職 | (空) | 2025/08/13 10:00 | (空) | TRUE |
```

#### 2. マニュアルマスタ（シート名: manuals）
- [ ] ヘッダー行の作成
```
| A:ID | B:大カテゴリ | C:中カテゴリ | D:小カテゴリ | E:タイトル | F:本文 | G:画像URL | H:動画URL | I:閲覧権限 | J:タグ | K:更新日時 | L:有効フラグ |
```

- [ ] データ検証ルール設定
  - IDは自動採番（M001形式）
  - 閲覧権限: 複数選択可（一般,総務,役職）

- [ ] サンプルマニュアル5件投入
```
例：
| M001 | 経理 | 経費精算 | 交通費 | 交通費申請方法 | 1.システムにログイン... | https://... | | 一般,総務,役職 | 経費,申請 | 2025/08/13 | TRUE |
```

#### 3. アクセスログ（シート名: access_logs）
- [ ] ヘッダー行の作成
```
| A:日時 | B:LINE_ID | C:ユーザー名 | D:アクション | E:検索キーワード | F:閲覧マニュアルID | G:レスポンス時間 |
```

- [ ] 自動削除設定（3ヶ月以上前のログ）

#### 4. 要望・問い合わせ（シート名: inquiries）
- [ ] ヘッダー行の作成
```
| A:ID | B:日時 | C:LINE_ID | D:ユーザー名 | E:種別 | F:内容 | G:ステータス | H:対応者 | I:対応内容 | J:対応日時 |
```

- [ ] データ検証ルール
  - 種別: 要望/質問/不具合
  - ステータス: 未対応/対応中/完了/保留

#### 5. システム設定（シート名: settings）
- [ ] ヘッダー行の作成
```
| A:キー | B:値 | C:説明 |
```

- [ ] 初期設定値投入
```
| maintenance_mode | FALSE | メンテナンスモード |
| welcome_message | ようこそ！業務マニュアルBotです | 初回メッセージ |
| not_found_message | マニュアルが見つかりませんでした | 検索失敗時メッセージ |
```

### Google Apps Script設定
- [ ] スプレッドシートにGASを追加
- [ ] 自動バックアップスクリプト作成
- [ ] データ整合性チェックスクリプト作成

### アクセス権限設定
- [ ] スプレッドシートの共有設定
  - [ ] サービスアカウント: 編集者
  - [ ] 管理者メンバー: 編集者
  - [ ] その他: 閲覧のみ

## 完了条件
- [ ] 全シート作成完了
- [ ] サンプルデータ投入完了
- [ ] データ検証ルール設定完了
- [ ] アクセス権限設定完了

## 備考
- スプレッドシートIDを控えておく
- 本番環境移行時はシートをコピーして使用
- 定期的なバックアップを推奨